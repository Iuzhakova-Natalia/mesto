{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto/./src/components/Card.js","webpack://mesto/./src/components/Popup.js","webpack://mesto/./src/components/PopupWithForm.js","webpack://mesto/./src/components/FormValidator.js","webpack://mesto/./src/utils/constants.js","webpack://mesto/./src/pages/index.js","webpack://mesto/./src/components/Api.js","webpack://mesto/./src/components/UserInfo.js","webpack://mesto/./src/components/Section.js","webpack://mesto/./src/components/PopupWithСonfirmation.js","webpack://mesto/./src/components/PopupWithImage.js"],"sourcesContent":["export default class Card {\r\n  constructor(cardData, userId, templateSelector, handleCardClick, { handleLikeClick, handleDeleteClick }) {\r\n    this._name = cardData.name;\r\n    this._link = cardData.link;\r\n    this._likes = cardData.likes;\r\n    this._cardId = cardData._id;\r\n    this._ownerId = cardData.owner._id;\r\n    this._userId = userId;\r\n    this._templateSelector = templateSelector;\r\n    this._handleCardClick = handleCardClick;\r\n    this._handleLikeClick = handleLikeClick;\r\n    this._handleDeleteClick = handleDeleteClick;\r\n  }\r\n\r\n  _getCardElement() {\r\n    const cardElement = document\r\n      .querySelector(this._templateSelector)\r\n      .content\r\n      .querySelector(\".card\")\r\n      .cloneNode(true);\r\n\r\n    return cardElement;\r\n  }\r\n\r\n  // поставить лайк\r\n  putLike(likesArray) {\r\n    this._likeCounter.textContent = likesArray.length;\r\n    this._buttonLike.classList.add('card__like_active');\r\n    this.isLiked = true;\r\n  }\r\n\r\n  // удалить лайк\r\n  deleteLike(likesArray) {\r\n    this._buttonLike.classList.remove('card__like_active');\r\n    this._likeCounter.textContent = likesArray.length;\r\n    this._isLiked = false;\r\n  }\r\n\r\n  // удалить карточку\r\n  deleteCard() {\r\n    this._card.remove();\r\n    this._card = null;\r\n  }\r\n\r\n  // установить слушатели по клику на корзину, лайк, картинку\r\n  _setEventListeners() {\r\n    this._buttonDelete.addEventListener('click', () => {\r\n    this._handleDeleteClick(this._cardId);\r\n    });\r\n\r\n    this._buttonLike.addEventListener('click', () => {\r\n      this._handleLikeClick(this._cardId, this._isLiked);\r\n    });\r\n\r\n    this._cardImage.addEventListener('click', () => {\r\n      this._handleCardClick(this._cardImage.src, this._cardImage.alt);\r\n    });\r\n  }\r\n\r\n  // заполнить шаблон карточки данными, добавить слушатели\r\n  generateCard() {\r\n    this._card = this._getCardElement();\r\n\r\n    this._cardImage = this._card.querySelector('.card__image');\r\n    this._cardName = this._card.querySelector('.card__name');\r\n    this._buttonDelete = this._card.querySelector('.card__delete');\r\n    this._buttonLike = this._card.querySelector('.card__like');\r\n    this._likeCounter = this._card.querySelector('.card__like-counter');\r\n\r\n    this._likeCounter.textContent = this._likes.length;\r\n\r\n    if (this._likes.some((user) => user._id === this._ownerId)) {\r\n      this._isLiked = true;\r\n      this._buttonLike.classList.add('card__like_active');\r\n    } else {\r\n      this._isLiked = false;\r\n      this._buttonLike.classList.remove('card__like_active');\r\n    }\r\n\r\n    if (this._ownerId !== this._userId) {\r\n      this._buttonDelete.remove();\r\n    }\r\n\r\n    this._setEventListeners();\r\n\r\n    this._cardName.textContent = this._name;\r\n    this._cardImage.alt = this._name;\r\n    this._cardImage.src = this._link;\r\n\r\n    return this._card;\r\n  }\r\n}\r\n\r\n\r\n\r\n","export default class Popup {\r\n  constructor(popupSelector) {\r\n    this._popup = document.querySelector(popupSelector);\r\n    this._handleEscClose = this._handleEscClose.bind(this);\r\n  }\r\n\r\n  open() {\r\n    this._popup.classList.add('popup_opened');\r\n    document.addEventListener('keydown', this._handleEscClose);\r\n  }\r\n\r\n  close() {\r\n    this._popup.classList.remove('popup_opened');\r\n    document.removeEventListener('keydown', this._handleEscClose);\r\n  }\r\n\r\n  _handleEscClose(evt) {\r\n    if (evt.key === 'Escape') {\r\n      this.close();\r\n    }\r\n  }\r\n\r\n  setEventListeners() {\r\n    this._popup.addEventListener('mousedown', (evt) => {\r\n        if (evt.target.classList.contains('popup_opened') || evt.target.classList.contains('popup__close-button')) {\r\n          this.close();\r\n        }\r\n    });\r\n  }\r\n}","import Popup from './Popup.js';\r\n\r\nexport default class PopupWithForm extends Popup {\r\n  constructor(popupSelector, handleSubmitForm) {\r\n    super(popupSelector);\r\n    this._handleSubmitForm = handleSubmitForm;\r\n    this._inputList = this._popup.querySelectorAll('.form__input-text');\r\n    this._form = this._popup.querySelector('.form');\r\n    this._buttonSubmit = this._form.querySelector('.form__button');\r\n    this._initialButtonText = this._buttonSubmit.textContent;\r\n  }\r\n\r\n  _getInputValues() {\r\n    this._formValues = {};\r\n    this._inputList.forEach((input) => {\r\n      this._formValues[input.name] = input.value;\r\n    });\r\n    return this._formValues;\r\n  }\r\n\r\n  setEventListeners() {\r\n    super.setEventListeners();\r\n    this._form.addEventListener('submit', (evt) => {\r\n      evt.preventDefault();\r\n      this._handleSubmitForm(this._getInputValues());\r\n    });\r\n  }\r\n\r\n  close() {\r\n    super.close();\r\n    this._form.reset();\r\n  }\r\n  \r\n  renderLoading(isLoading) {\r\n    if (isLoading) {\r\n      this._buttonSubmit.textContent = 'Сохранение...';\r\n    } else {\r\n      this._buttonSubmit.textContent = this._initialButtonText;\r\n    }\r\n  }\r\n}","export default class FormValidator {\r\n  constructor(configValidation, formElement) {\r\n    this._inputSelector = configValidation.inputSelector;\r\n    this._submitButtonSelector = configValidation.submitButtonSelector;\r\n    this._inactiveButtonClass = configValidation.inactiveButtonClass;\r\n    this._inputErrorClass = configValidation.inputErrorClass;\r\n    this._errorClass = configValidation.errorClass;\r\n\r\n    this._formElement = formElement;\r\n\r\n    this._inputList = Array.from(\r\n      this._formElement.querySelectorAll(this._inputSelector)\r\n    );\r\n    this._buttonElement = this._formElement.querySelector(\r\n      this._submitButtonSelector\r\n    );\r\n  }\r\n\r\n  // показать ошибку\r\n  _showInputError(inputElement) {\r\n    const errorElement = this._formElement.querySelector(\r\n      `.${inputElement.id}-error`\r\n    );\r\n    errorElement.textContent = inputElement.validationMessage;\r\n    errorElement.classList.add(this._errorClass);\r\n    inputElement.classList.add(this._inputErrorClass);\r\n  }\r\n\r\n  // скрыть ошибку\r\n  _hideInputError(inputElement) {\r\n    const errorElement = this._formElement.querySelector(\r\n      `.${inputElement.id}-error`\r\n    );\r\n    errorElement.textContent = \"\";\r\n    errorElement.classList.remove(this._errorClass);\r\n    inputElement.classList.remove(this._inputErrorClass);\r\n  }\r\n\r\n  // проверить на валидность конкретное поле ввода\r\n  _checkInputValidity(inputElement) {\r\n    if (!inputElement.validity.valid) {\r\n      this._showInputError(inputElement);\r\n    } else {\r\n      this._hideInputError(inputElement);\r\n    }\r\n  }\r\n\r\n  // найти среди всех полей ввода хотя бы одно невалидное поле\r\n  // для настройки статуса кнопки\r\n  _hasInvalidInput() {\r\n    return this._inputList.some((inputElement) => {\r\n      return !inputElement.validity.valid;\r\n    });\r\n  }\r\n\r\n  // заблокировать кнопку\r\n  _disableButton() {\r\n    this._buttonElement.classList.add(this._inactiveButtonClass);\r\n    this._buttonElement.setAttribute(\"disabled\", true);\r\n  }\r\n\r\n  // активировать кнопку\r\n  _enableButton() {\r\n    this._buttonElement.classList.remove(this._inactiveButtonClass);\r\n    this._buttonElement.removeAttribute(\"disabled\");\r\n  }\r\n\r\n  // изменить статус кнопки\r\n  _toggleButtonState() {\r\n    // если хотя бы одно поле ввода пустое или невалидно, сделать кнопку неактивной\r\n    if (this._hasInvalidInput()) {\r\n      this._disableButton();\r\n      // иначе - активной\r\n    } else {\r\n      this._enableButton();\r\n    }\r\n  }\r\n\r\n  // установить слушатели на все поля ввода и submit формы\r\n  // форму передаем через formElement\r\n  _setEventListeners() {\r\n    this._inputList.forEach((inputElement) => {\r\n      inputElement.addEventListener(\"input\", () => {\r\n        this._checkInputValidity(inputElement);\r\n        this._toggleButtonState();\r\n      });\r\n    });\r\n\r\n    this._formElement.addEventListener(\"submit\", (evt) => {\r\n      evt.preventDefault();\r\n    });\r\n  }\r\n\r\n  // сброс валидации\r\n  resetValidation() {\r\n    // кнопка неактивна\r\n    this._toggleButtonState();\r\n    // ошибки не показывать\r\n    this._inputList.forEach((inputElement) => {\r\n      this._hideInputError(inputElement);\r\n    });\r\n  }\r\n\r\n  // валидация формы\r\n  enableValidation() {\r\n    this._setEventListeners();\r\n  }\r\n}\r\n\r\n","\r\nexport const configValidation = {\r\n  inputSelector: \".form__input-text\",\r\n  submitButtonSelector: \".form__button\",\r\n  inactiveButtonClass: \"form__button_disabled\",\r\n  inputErrorClass: \"form__input-text_type_error-line\",\r\n  errorClass: \"form__input-error_active\",\r\n};\r\n\r\n// попапы\r\nexport const popupEditProfileSelector = \".popup_tupe_edit\";\r\nexport const popupAddCardSelector = \".popup_type_new-place\";\r\nexport const popupCardImageSelector = \".popup_type_image\";\r\nexport const popupAvatarSelector = \".popup_type_avatar\";\r\nexport const popupFormConfirmationSelector = '.popup_type_delete-card';\r\n\r\n// профиль\r\nexport const userNameSelector = '.profile__name';\r\nexport const userAboutSelector = '.profile__about';\r\nexport const userAvatarSelector = '.profile__avatar';\r\n\r\n// кнопки\r\nexport const buttonOpenEditProfilePopup = document.querySelector(\".profile__button_type_edit\");\r\nexport const buttonOpenAddCardPopup = document.querySelector(\".profile__add-button\");\r\nexport const buttonOpenAvatarPopup = document.querySelector(\".profile__ava-button\");\r\n\r\n// формы\r\nexport const formEditProfile = document.forms[\"form-edit-profile\"];\r\nexport const formAvatar = document.forms[\"form-avatar\"];\r\nexport const formCard = document.forms[\"form-add-card\"];\r\n\r\n// template и контейнер для карточек\r\nexport const cardTemplateSelector = '#card-template';\r\nexport const cardsContainerSelector = '.cards-container'; ","import './index.css';\r\nimport Api from \"../components/Api\";\r\nimport Section from '../components/Section.js';\r\nimport Card from '../components/Card.js';\r\nimport PopupWithForm from '../components/PopupWithForm.js';\r\nimport PopupWithImage from '../components/PopupWithImage.js';\r\nimport PopupWithСonfirmation from '../components/PopupWithСonfirmation.js';\r\nimport UserInfo from '../components/UserInfo.js';\r\nimport FormValidator from '../components/FormValidator.js';\r\nimport {\r\n  configValidation,\r\n  popupEditProfileSelector,\r\n  popupAvatarSelector,\r\n  popupAddCardSelector,\r\n  popupCardImageSelector,\r\n  popupFormConfirmationSelector,\r\n  userNameSelector,\r\n  userAboutSelector,\r\n  userAvatarSelector,\r\n  buttonOpenEditProfilePopup,\r\n  buttonOpenAvatarPopup,\r\n  buttonOpenAddCardPopup,\r\n  formEditProfile,\r\n  formAvatar,\r\n  formCard,\r\n  cardTemplateSelector,\r\n  cardsContainerSelector\r\n} from '../utils/constants.js';\r\n\r\nlet userId;\r\n\r\nconst api = new Api({\r\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-64',\r\n  headers: {\r\n    authorization: 'a24e7087-a96b-4b2b-8905-f0302e2d2b76',\r\n    'Content-Type': 'application/json'\r\n  }\r\n}); \r\n\r\n// Редактирование профиля\r\n\r\n// получить данные о пользователе с сервера\r\napi.getUserInfo()\r\n  .then((userData) => {\r\n    userInfo.setUserInfo(userData);\r\n    userId = userData._id;\r\n  })\r\n  .catch((err) => {\r\n    console.log(`Ошибка: ${err}`);\r\n  }); \r\n\r\n// обработчик редактирования профиля\r\nconst handleEditProfile = () => {\r\n  const {name, about} = userInfo.getUserInfo();\r\n  formEditProfile.name.value = name;\r\n  formEditProfile.about.value = about;\r\n  formProfileValidator.resetValidation();\r\n  popupEditProfile.open();\r\n};\r\n\r\n// обработчик submit профиля\r\nconst handleSubmitProfile = (userData) => {\r\n  popupEditProfile.renderLoading(true);\r\n  // запрос на сервер: обновить данные о пользователе\r\n  api.patchUserInfo(userData)\r\n    .then((userData) => {\r\n      userInfo.setUserInfo(userData);\r\n      popupEditProfile.close();\r\n    })\r\n    .catch((err) => {\r\n      console.log(`Ошибка: ${err}`);\r\n    })\r\n    .finally(() => {\r\n      popupEditProfile.renderLoading(false);\r\n    })\r\n};\r\n\r\n// Добавление карточек\r\n\r\n// обработчик клика по картинке карточки (открыть)\r\nconst handleCardClick = (cardImageSrc, cardImageAlt) => {\r\n  popupCardImage.open(cardImageSrc, cardImageAlt);\r\n};\r\n\r\n// добавить карточку\r\nconst renderCard = (cardData) => {\r\n  const card = new Card(\r\n    cardData,\r\n    userId,\r\n    cardTemplateSelector,\r\n    handleCardClick,\r\n    {handleLikeClick: (cardId, isLiked) => {\r\n        if (isLiked) {\r\n          // запрос на сервер: удалить лайк\r\n          api.deleteLike(cardId)\r\n            .then((cardData) => {\r\n              card.deleteLike(cardData.likes);\r\n            })\r\n            .catch((err) => {\r\n              console.log(`Ошибка: ${err}`);\r\n            });\r\n        } else {\r\n          // запрос на сервер: поставить лайк\r\n          api.putLike(cardId)\r\n            .then((cardData) => {\r\n              card.putLike(cardData.likes);\r\n            })\r\n            .catch((err) => {\r\n              console.log(`Ошибка: ${err}`);\r\n            });\r\n        }\r\n      },\r\n      handleDeleteClick: (cardId) => {\r\n        popupFormConfirmation.open();\r\n        popupFormConfirmation.handleSubmit(() => {\r\n          // запрос на сервер: удалить карточку\r\n          api.deleteCard(cardId)\r\n            .then((cardData) => {\r\n              card.deleteCard(cardData._id);\r\n              popupFormConfirmation.close();\r\n            })\r\n            .catch((err) => {\r\n              console.log(`Ошибка: ${err}`);\r\n            });\r\n        })\r\n      }\r\n    },\r\n  );\r\n  const generatedCard = card.generateCard();\r\n  cardsContainer.addItem(generatedCard);\r\n};\r\n\r\n\r\n// открыть форму Новое место\r\nconst handleAddCard = () => {\r\n  formCardValidator.resetValidation();\r\n  popupAddCard.open();\r\n};\r\n\r\n// обработчик submit/закрытия формы \"Новое место\"\r\nconst handleSubmitCard = (cardData) => {\r\n  popupAddCard.renderLoading(true);\r\n  // запрос на сервер: добавить карточку\r\n  api.postCard(cardData)\r\n    .then((cardData) => {\r\n      renderCard(cardData);\r\n      popupAddCard.close();\r\n    })\r\n    .catch((err) => {\r\n      console.log(`Ошибка: ${err}`);\r\n    })\r\n    .finally(() => {\r\n      popupAddCard.renderLoading(false);\r\n    })\r\n};\r\n\r\n// сервер: загрузить массив карточек\r\napi.getCards()\r\n  .then((cards) => {\r\n    cardsContainer.renderItems(cards);\r\n  })\r\n  .catch((err) => {\r\n    console.log(`Ошибка: ${err}`);\r\n  });\r\n\r\n  // Обновление аватара\r\n\r\n  // открыть форму \"Обновить аватар\"\r\n  const handleOpenAvatar = () => {\r\n    formAvatarValidator.resetValidation();\r\n    popupAvatar.open();\r\n  };\r\n  \r\n  // submit + закрыть форму \"Обновить аватар\"\r\n  const handleSubmitAvatar = (userData) => {\r\n    popupAvatar.renderLoading(true);\r\n    // запрос на сервер: обновить аватар пользователя\r\n    api.patchAvatar(userData)\r\n      .then((userData) => {\r\n        userInfo.setUserAvatar(userData);\r\n        popupAvatar.close();\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Ошибка: ${err}`);\r\n      })\r\n      .finally(() => {\r\n        popupAvatar.renderLoading(false);\r\n      })\r\n  };\r\n\r\n// Экземпляры классов\r\n\r\nconst userInfo = new UserInfo(userNameSelector, userAboutSelector, userAvatarSelector);\r\nconst cardsContainer = new Section({ renderer: renderCard }, cardsContainerSelector);\r\nconst popupEditProfile = new PopupWithForm(popupEditProfileSelector, handleSubmitProfile);\r\nconst popupAvatar = new PopupWithForm(popupAvatarSelector, handleSubmitAvatar);\r\nconst popupFormConfirmation = new PopupWithСonfirmation(popupFormConfirmationSelector);\r\nconst popupAddCard = new PopupWithForm(popupAddCardSelector,handleSubmitCard);\r\nconst popupCardImage = new PopupWithImage(popupCardImageSelector);\r\nconst formProfileValidator = new FormValidator(configValidation, formEditProfile);\r\nconst formCardValidator = new FormValidator(configValidation, formCard);\r\nconst formAvatarValidator = new FormValidator(configValidation, formAvatar); \r\n\r\n// ВАЛИДАЦИЯ ФОРМ\r\n\r\nformProfileValidator.enableValidation();\r\nformCardValidator.enableValidation();\r\nformAvatarValidator.enableValidation();\r\n\r\n// СЛУШАТЕЛИ СОБЫТИЙ\r\n\r\nbuttonOpenEditProfilePopup.addEventListener('click', handleEditProfile);\r\nbuttonOpenAddCardPopup.addEventListener('click', handleAddCard);\r\nbuttonOpenAvatarPopup.addEventListener('click', handleOpenAvatar);\r\npopupEditProfile.setEventListeners();\r\npopupAvatar.setEventListeners();\r\npopupFormConfirmation.setEventListeners();\r\npopupAddCard.setEventListeners();\r\npopupCardImage.setEventListeners();","export default class Api {\r\n  constructor({ baseUrl, headers }) {\r\n    this._baseUrl = baseUrl;\r\n    this._headers = headers;\r\n  }\r\n  \r\n  // проверить ответ сервера\r\n  _checkResponse(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка: ${res.status}`);\r\n  }\r\n\r\n  // получить данные о пользователе\r\n  getUserInfo() {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: 'GET',\r\n      headers: this._headers\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  // обновить данные о пользователе\r\n  patchUserInfo({ name, about }) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name,\r\n        about\r\n      })\r\n    }).then(this._checkResponse);\r\n  }\r\n  \r\n  // обновить аватар пользователя\r\n  patchAvatar({ avatar }) {\r\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        avatar\r\n      })\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  // получить карточки\r\n  getCards() {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      method: 'GET',\r\n      headers: this._headers\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  // добавить карточку\r\n  postCard({ name, link }) {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      method: 'POST',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name,\r\n        link\r\n      })\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  // удалить карточку\r\n  deleteCard(cardId) {\r\n    return fetch(`${this._baseUrl}/cards/${cardId}`, {\r\n      method: 'DELETE',\r\n      headers: this._headers,\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  // поставить лайк\r\n  putLike(cardId) {\r\n    return fetch(`${this._baseUrl}/cards/${cardId}/likes`, {\r\n      method: 'PUT',\r\n      headers: this._headers,\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  // удалить лайк\r\n  deleteLike(cardId) {\r\n    return fetch(`${this._baseUrl}/cards/${cardId}/likes`, {\r\n      method: 'DELETE',\r\n      headers: this._headers,\r\n    }).then(this._checkResponse);\r\n  }\r\n}","export default class UserInfo {\r\n  constructor(userNameSelector, userAboutSelector, userAvatarSelector) {\r\n    this._userName = document.querySelector(userNameSelector);\r\n    this._userAbout = document.querySelector(userAboutSelector);\r\n    this._userAvatar = document.querySelector(userAvatarSelector);\r\n  }\r\n\r\n  getUserInfo() {\r\n    const userInfo = {};\r\n    userInfo['name'] = this._userName.textContent;\r\n    userInfo['about'] = this._userAbout.textContent;\r\n    return userInfo;\r\n  }\r\n\r\n  setUserInfo({ name, about }) {\r\n    this._userName.textContent = name;\r\n    this._userAbout.textContent = about;\r\n    this._userAvatar.src = avatar;\r\n  }\r\n\r\n  setUserAvatar({ avatar }) {\r\n    this._userAvatar.src = avatar;\r\n  }\r\n}","export default class Section {\r\n  constructor({ renderer }, containerSelector) {\r\n    this._renderer = renderer;\r\n    this._container = document.querySelector(containerSelector);\r\n  }\r\n\r\n  renderItems(items) {\r\n    items.forEach((item) => {\r\n      this._renderer(item);\r\n    });\r\n  }\r\n\r\n  addItem(element) {\r\n    this._container.prepend(element);\r\n  }\r\n}\r\n\r\n\r\n\r\n","import Popup from './Popup.js';\r\n\r\nexport default class PopupWithСonfirmation extends Popup {\r\n  constructor(popupSelector) {\r\n    super(popupSelector);\r\n    this._form = this._popup.querySelector('.form');\r\n  }\r\n\r\n  handleSubmit(action) {\r\n    this._submitHandler = action;\r\n  }\r\n\r\n  setEventListeners() {\r\n    super.setEventListeners();\r\n    this._form.addEventListener('submit', (evt) => {\r\n      evt.preventDefault();\r\n      this._submitHandler();\r\n    });\r\n  }\r\n}","import Popup from './Popup.js';\r\n\r\nexport default class PopupWithImage extends Popup {\r\n  constructor(popupSelector) {\r\n    super(popupSelector);\r\n    this._image = this._popup.querySelector('.popup__image');\r\n    this._place = this._popup.querySelector('.popup__place');\r\n  }\r\n\r\n  open(cardImageSrc, cardImageAlt) {\r\n    \r\n    this._image.src = cardImageSrc;\r\n    this._image.alt = cardImageAlt;\r\n    this._place.textContent = cardImageAlt;\r\n\r\n    super.open();\r\n  }\r\n}"],"names":["Card","constructor","cardData","userId","templateSelector","handleCardClick","handleLikeClick","handleDeleteClick","this","_name","name","_link","link","_likes","likes","_cardId","_id","_ownerId","owner","_userId","_templateSelector","_handleCardClick","_handleLikeClick","_handleDeleteClick","_getCardElement","document","querySelector","content","cloneNode","putLike","likesArray","_likeCounter","textContent","length","_buttonLike","classList","add","isLiked","deleteLike","remove","_isLiked","deleteCard","_card","_setEventListeners","_buttonDelete","addEventListener","_cardImage","src","alt","generateCard","_cardName","some","user","Popup","popupSelector","_popup","_handleEscClose","bind","open","close","removeEventListener","evt","key","setEventListeners","target","contains","PopupWithForm","handleSubmitForm","super","_handleSubmitForm","_inputList","querySelectorAll","_form","_buttonSubmit","_initialButtonText","_getInputValues","_formValues","forEach","input","value","preventDefault","reset","renderLoading","isLoading","FormValidator","configValidation","formElement","_inputSelector","inputSelector","_submitButtonSelector","submitButtonSelector","_inactiveButtonClass","inactiveButtonClass","_inputErrorClass","inputErrorClass","_errorClass","errorClass","_formElement","Array","from","_buttonElement","_showInputError","inputElement","errorElement","id","validationMessage","_hideInputError","_checkInputValidity","validity","valid","_hasInvalidInput","_disableButton","setAttribute","_enableButton","removeAttribute","_toggleButtonState","resetValidation","enableValidation","buttonOpenEditProfilePopup","buttonOpenAddCardPopup","buttonOpenAvatarPopup","formEditProfile","forms","formAvatar","formCard","api","baseUrl","headers","_baseUrl","_headers","_checkResponse","res","ok","json","Promise","reject","status","getUserInfo","fetch","method","then","patchUserInfo","about","body","JSON","stringify","patchAvatar","avatar","getCards","postCard","cardId","authorization","userData","userInfo","setUserInfo","catch","err","console","log","cardImageSrc","cardImageAlt","popupCardImage","renderCard","card","popupFormConfirmation","handleSubmit","generatedCard","cardsContainer","addItem","cards","renderItems","userNameSelector","userAboutSelector","userAvatarSelector","_userName","_userAbout","_userAvatar","setUserAvatar","renderer","containerSelector","_renderer","_container","items","item","element","prepend","popupEditProfile","finally","popupAvatar","action","_submitHandler","popupAddCard","_image","_place","formProfileValidator","formCardValidator","formAvatarValidator","handleEditProfile","handleAddCard","handleOpenAvatar"],"sourceRoot":""}