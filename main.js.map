{"version":3,"file":"main.js","mappings":"mBAAe,MAAMA,EACnBC,YAAYC,EAAUC,EAAQC,EAAkBC,GAAiB,gBAAEC,EAAe,kBAAEC,IAClFC,KAAKC,MAAQP,EAASQ,KACtBF,KAAKG,MAAQT,EAASU,KACtBJ,KAAKK,OAASX,EAASY,MACvBN,KAAKO,QAAUb,EAASc,IACxBR,KAAKS,SAAWf,EAASgB,MAAMF,IAC/BR,KAAKW,QAAUhB,EACfK,KAAKY,kBAAoBhB,EACzBI,KAAKa,iBAAmBhB,EACxBG,KAAKc,iBAAmBhB,EACxBE,KAAKe,mBAAqBhB,CAC5B,CAEAiB,kBAOE,OANoBC,SACjBC,cAAclB,KAAKY,mBACnBO,QACAD,cAAc,SACdE,WAAU,EAGf,CAGAC,QAAQC,GACNtB,KAAKuB,aAAaC,YAAcF,EAAWG,OAC3CzB,KAAK0B,YAAYC,UAAUC,IAAI,qBAC/B5B,KAAK6B,UAAW,CAClB,CAGAC,WAAWR,GACTtB,KAAKuB,aAAaC,YAAcF,EAAWG,OAC3CzB,KAAK0B,YAAYC,UAAUI,OAAO,qBAClC/B,KAAK6B,UAAW,CAClB,CAGAG,aACEhC,KAAKiC,MAAMF,SACX/B,KAAKiC,MAAQ,IACf,CAGAC,qBACElC,KAAKmC,cAAcC,iBAAiB,SAAS,KAC3CpC,KAAKe,mBAAmBf,KAAKO,QAAQ,IAGvCP,KAAK0B,YAAYU,iBAAiB,SAAS,KACzCpC,KAAKc,iBAAiBd,KAAKO,QAASP,KAAK6B,SAAS,IAGpD7B,KAAKqC,WAAWD,iBAAiB,SAAS,KACxCpC,KAAKa,iBAAiBb,KAAKqC,WAAWC,IAAKtC,KAAKqC,WAAWE,IAAI,GAEnE,CAIAC,eA6BE,OA5BAxC,KAAKiC,MAAQjC,KAAKgB,kBAElBhB,KAAKqC,WAAarC,KAAKiC,MAAMf,cAAc,gBAC3ClB,KAAKyC,UAAYzC,KAAKiC,MAAMf,cAAc,eAC1ClB,KAAKmC,cAAgBnC,KAAKiC,MAAMf,cAAc,iBAC9ClB,KAAK0B,YAAc1B,KAAKiC,MAAMf,cAAc,eAC5ClB,KAAKuB,aAAevB,KAAKiC,MAAMf,cAAc,uBAE7ClB,KAAKuB,aAAaC,YAAcxB,KAAKK,OAAOoB,OAExCzB,KAAKK,OAAOqC,MAAMC,GAASA,EAAKnC,MAAQR,KAAKS,YAC/CT,KAAK6B,UAAW,EAChB7B,KAAK0B,YAAYC,UAAUC,IAAI,uBAE/B5B,KAAK6B,UAAW,EAChB7B,KAAK0B,YAAYC,UAAUI,OAAO,sBAGhC/B,KAAKS,WAAaT,KAAKW,SACzBX,KAAKmC,cAAcJ,SAGrB/B,KAAKkC,qBAELlC,KAAKyC,UAAUjB,YAAcxB,KAAKC,MAClCD,KAAKqC,WAAWE,IAAMvC,KAAKC,MAC3BD,KAAKqC,WAAWC,IAAMtC,KAAKG,MAEpBH,KAAKiC,KACd,EC3Fa,MAAMW,EACnBnD,YAAYoD,GACV7C,KAAK8C,OAAS7B,SAASC,cAAc2B,GACrC7C,KAAK+C,gBAAkB/C,KAAK+C,gBAAgBC,KAAKhD,KACnD,CAEAiD,OACEjD,KAAK8C,OAAOnB,UAAUC,IAAI,gBAC1BX,SAASmB,iBAAiB,UAAWpC,KAAK+C,gBAC5C,CAEAG,QACElD,KAAK8C,OAAOnB,UAAUI,OAAO,gBAC7Bd,SAASkC,oBAAoB,UAAWnD,KAAK+C,gBAC/C,CAEAA,gBAAgBK,GACE,WAAZA,EAAIC,KACNrD,KAAKkD,OAET,CAEAI,oBACEtD,KAAK8C,OAAOV,iBAAiB,aAAcgB,KACnCA,EAAIG,OAAO5B,UAAU6B,SAAS,iBAAmBJ,EAAIG,OAAO5B,UAAU6B,SAAS,yBACjFxD,KAAKkD,OACP,GAEN,EC1Ba,MAAMO,UAAsBb,EACzCnD,YAAYoD,EAAea,GACzBC,MAAMd,GACN7C,KAAK4D,kBAAoBF,EACzB1D,KAAK6D,WAAa7D,KAAK8C,OAAOgB,iBAAiB,qBAC/C9D,KAAK+D,MAAQ/D,KAAK8C,OAAO5B,cAAc,SACvClB,KAAKgE,cAAgBhE,KAAK+D,MAAM7C,cAAc,iBAC9ClB,KAAKiE,mBAAqBjE,KAAKgE,cAAcxC,WAC/C,CAEA0C,kBAKE,OAJAlE,KAAKmE,YAAc,CAAC,EACpBnE,KAAK6D,WAAWO,SAASC,IACvBrE,KAAKmE,YAAYE,EAAMnE,MAAQmE,EAAMC,KAAK,IAErCtE,KAAKmE,WACd,CAEAb,oBACEK,MAAML,oBACNtD,KAAK+D,MAAM3B,iBAAiB,UAAWgB,IACrCA,EAAImB,iBACJvE,KAAK4D,kBAAkB5D,KAAKkE,kBAAkB,GAElD,CAEAhB,QACES,MAAMT,QACNlD,KAAK+D,MAAMS,OACb,CAEAC,cAAcC,GAEV1E,KAAKgE,cAAcxC,YADjBkD,EAC+B,gBAEA1E,KAAKiE,kBAE1C,ECvCa,MAAMU,EACnBlF,YAAYmF,EAAkBC,GAC5B7E,KAAK8E,eAAiBF,EAAiBG,cACvC/E,KAAKgF,sBAAwBJ,EAAiBK,qBAC9CjF,KAAKkF,qBAAuBN,EAAiBO,oBAC7CnF,KAAKoF,iBAAmBR,EAAiBS,gBACzCrF,KAAKsF,YAAcV,EAAiBW,WAEpCvF,KAAKwF,aAAeX,EAEpB7E,KAAK6D,WAAa4B,MAAMC,KAAK1F,KAAKwF,aAAa1B,iBAAiB9D,KAAK8E,iBACrE9E,KAAK2F,eAAiB3F,KAAKwF,aAAatE,cAAclB,KAAKgF,sBAC7D,CAGAY,gBAAgBC,GACd,MAAMC,EAAe9F,KAAKwF,aAAatE,cACpC,IAAG2E,EAAaE,YAEnBD,EAAatE,YAAcqE,EAAaG,kBACxCF,EAAanE,UAAUC,IAAI5B,KAAKsF,aAChCO,EAAalE,UAAUC,IAAI5B,KAAKoF,iBAClC,CAGAa,gBAAgBJ,GACd,MAAMC,EAAe9F,KAAKwF,aAAatE,cACpC,IAAG2E,EAAaE,YAEnBD,EAAatE,YAAc,GAC3BsE,EAAanE,UAAUI,OAAO/B,KAAKsF,aACnCO,EAAalE,UAAUI,OAAO/B,KAAKoF,iBACrC,CAGAc,oBAAoBL,GACbA,EAAaM,SAASC,MAGzBpG,KAAKiG,gBAAgBJ,GAFrB7F,KAAK4F,gBAAgBC,EAIzB,CAIAQ,mBACE,OAAOrG,KAAK6D,WAAWnB,MAAMmD,IACnBA,EAAaM,SAASC,OAElC,CAGAE,iBACEtG,KAAK2F,eAAehE,UAAUC,IAAI5B,KAAKkF,sBACvClF,KAAK2F,eAAeY,aAAa,YAAY,EAC/C,CAGAC,gBACExG,KAAK2F,eAAehE,UAAUI,OAAO/B,KAAKkF,sBAC1ClF,KAAK2F,eAAec,gBAAgB,WACtC,CAGAC,qBAEM1G,KAAKqG,mBACPrG,KAAKsG,iBAGLtG,KAAKwG,eAET,CAIAtE,qBACElC,KAAK6D,WAAWO,SAASyB,IACvBA,EAAazD,iBAAiB,SAAS,KACrCpC,KAAKkG,oBAAoBL,GACzB7F,KAAK0G,oBAAoB,GACzB,IAGJ1G,KAAKwF,aAAapD,iBAAiB,UAAWgB,IAC5CA,EAAImB,gBAAgB,GAExB,CAGAoC,kBAEE3G,KAAK0G,qBAEL1G,KAAK6D,WAAWO,SAASyB,IACvB7F,KAAKiG,gBAAgBJ,EAAa,GAEtC,CAGAe,mBACE5G,KAAKkC,oBACP,ECrGK,MAAM0C,EAAmB,CAC9BG,cAAe,oBACfE,qBAAsB,gBACtBE,oBAAqB,wBACrBE,gBAAiB,mCACjBE,WAAY,4BAgBDsB,EAAa5F,SAASC,cAAc,8BACpC4F,EAAY7F,SAASC,cAAc,wBACnC6F,EAAe9F,SAASC,cAAc,wBAGtC8F,EAAc/F,SAASgG,MAAM,qBAC7BC,EAAajG,SAASgG,MAAM,eAC5BE,EAAWlG,SAASgG,MAAM,iBCAvC,IAAItH,EAEJ,MAAMyH,EAAM,IC/BG,MACb3H,aAAY,QAAE4H,EAAO,QAAEC,IACrBtH,KAAKuH,SAAWF,EAChBrH,KAAKwH,SAAWF,CAClB,CAGAG,eAAeC,GACb,OAAIA,EAAIC,GACCD,EAAIE,OAENC,QAAQC,OAAQ,WAAUJ,EAAIK,SACvC,CAGAC,cACE,OAAOC,MAAO,GAAEjI,KAAKuH,oBAAqB,CACxCW,OAAQ,MACRZ,QAAStH,KAAKwH,WAEbW,KAAKnI,KAAKyH,eACf,CAGAW,eAAc,KAAElI,EAAI,MAAEmI,IACpB,OAAOJ,MAAO,GAAEjI,KAAKuH,oBAAqB,CACxCW,OAAQ,QACRZ,QAAStH,KAAKwH,SACdc,KAAMC,KAAKC,UAAU,CACnBtI,OACAmI,YAGDF,KAAKnI,KAAKyH,eACf,CAGAgB,aAAY,OAAEC,IACZ,OAAOT,MAAO,GAAEjI,KAAKuH,2BAA4B,CAC/CW,OAAQ,QACRZ,QAAStH,KAAKwH,SACdc,KAAMC,KAAKC,UAAU,CACnBE,aAGDP,KAAKnI,KAAKyH,eACf,CAGAkB,WACE,OAAOV,MAAO,GAAEjI,KAAKuH,iBAAkB,CACrCW,OAAQ,MACRZ,QAAStH,KAAKwH,WAEbW,KAAKnI,KAAKyH,eACf,CAGAmB,UAAS,KAAE1I,EAAI,KAAEE,IACf,OAAO6H,MAAO,GAAEjI,KAAKuH,iBAAkB,CACrCW,OAAQ,OACRZ,QAAStH,KAAKwH,SACdc,KAAMC,KAAKC,UAAU,CACnBtI,OACAE,WAGD+H,KAAKnI,KAAKyH,eACf,CAGAzF,WAAW6G,GACT,OAAOZ,MAAO,GAAEjI,KAAKuH,kBAAkBsB,IAAU,CAC/CX,OAAQ,SACRZ,QAAStH,KAAKwH,WAEbW,KAAKnI,KAAKyH,eACf,CAGApG,QAAQwH,GACN,OAAOZ,MAAO,GAAEjI,KAAKuH,kBAAkBsB,UAAgB,CACrDX,OAAQ,MACRZ,QAAStH,KAAKwH,WAEbW,KAAKnI,KAAKyH,eACf,CAGA3F,WAAW+G,GACT,OAAOZ,MAAO,GAAEjI,KAAKuH,kBAAkBsB,UAAgB,CACrDX,OAAQ,SACRZ,QAAStH,KAAKwH,WAEbW,KAAKnI,KAAKyH,eACf,GDhEkB,CAClBJ,QAAS,8CACTC,QAAS,CACPwB,cAAe,uCACf,eAAgB,sBAOpBjB,QAAQkB,IAAI,CAAC3B,EAAIY,cAAeZ,EAAIuB,aACjCR,MAAK,EAAEa,EAAUC,MAChBtJ,EAASqJ,EAASxI,IAClB0I,EAASC,YAAYH,GACrBI,EAAeC,YAAYJ,EAAM,IAElCK,OAAOC,IACNC,QAAQC,IAAK,WAAUF,IAAM,IAMjC,MA4BM1J,EAAkBA,CAAC6J,EAAcC,KACrCC,EAAe3G,KAAKyG,EAAcC,EAAa,EAI3CE,EAAcnK,IAClB,MAAMoK,EAAO,IAAItK,EACfE,EACAC,ED3DgC,iBC6DhCE,EACA,CAAEC,gBAAiBA,CAAC+I,EAAQkB,KACpBA,EAEF3C,EAAItF,WAAW+G,GACZV,MAAMzI,IACLoK,EAAKhI,WAAWpC,EAASY,MAAM,IAEhCgJ,OAAOC,IACNC,QAAQC,IAAK,WAAUF,IAAM,IAIjCnC,EAAI/F,QAAQwH,GACTV,MAAMzI,IACLoK,EAAKzI,QAAQ3B,EAASY,MAAM,IAE7BgJ,OAAOC,IACNC,QAAQC,IAAK,WAAUF,IAAM,GAEnC,EAEFxJ,kBAAoB8I,IAClBmB,EAAsB/G,OACtB+G,EAAsBC,cAAa,KAEjC7C,EAAIpF,WAAW6G,GACZV,MAAMzI,IACLoK,EAAK9H,WAAWtC,EAASc,KACzBwJ,EAAsB9G,OAAO,IAE9BoG,OAAOC,IACNC,QAAQC,IAAK,WAAUF,IAAM,GAC7B,GACJ,IAKR,OADoBO,EAAKtH,cACP,EAsDd0G,EAAW,IE1LF,MACbzJ,YAAYyK,EAAkBC,EAAmBC,GAC/CpK,KAAKqK,UAAYpJ,SAASC,cAAcgJ,GACxClK,KAAKsK,WAAarJ,SAASC,cAAciJ,GACzCnK,KAAKuK,YAActJ,SAASC,cAAckJ,EAC5C,CAEApC,cACE,MAAMkB,EAAW,CAAC,EAGlB,OAFAA,EAAe,KAAIlJ,KAAKqK,UAAU7I,YAClC0H,EAAgB,MAAIlJ,KAAKsK,WAAW9I,YAC7B0H,CACT,CAEAC,aAAY,KAAEjJ,EAAI,MAAEmI,EAAK,OAAEK,IACzB1I,KAAKqK,UAAU7I,YAActB,EAC7BF,KAAKsK,WAAW9I,YAAc6G,EAC9BrI,KAAKuK,YAAYjI,IAAMoG,CACzB,CAEA8B,eAAc,OAAE9B,IACd1I,KAAKuK,YAAYjI,IAAMoG,CACzB,GHL8B,iBACC,kBACC,oBCwK5BU,EAAiB,IG3LR,MACb3J,aAAY,SAAEgL,GAAYC,GACxB1K,KAAK2K,UAAYF,EACjBzK,KAAK4K,WAAa3J,SAASC,cAAcwJ,EAC3C,CAEArB,YAAYwB,GACVA,EAAMzG,SAAS0G,IACb9K,KAAK4K,WAAWG,OAAO/K,KAAK2K,UAAUG,GAAM,GAEhD,CAEAE,QAAQC,GACNjL,KAAK4K,WAAWM,QAAQD,EAC1B,GH6KiC,CAAER,SAAUZ,GD1JT,oBC2JhCsB,EAAmB,IAAI1H,EDlLW,oBCsDPuF,IAC/BmC,EAAiB1G,eAAc,GAE/B2C,EAAIgB,cAAcY,GACfb,MAAMa,IACLE,EAASC,YAAYH,GACrBmC,EAAiBjI,OAAO,IAEzBoG,OAAOC,IACNC,QAAQC,IAAK,WAAUF,IAAM,IAE9B6B,SAAQ,KACPD,EAAiB1G,eAAc,EAAM,GACrC,IAgHA4G,EAAkB,IAAI5H,EDhLW,sBC0JPuF,IAC9BqC,EAAgB5G,eAAc,GAE9B2C,EAAIqB,YAAYO,GACbb,MAAMa,IACLE,EAASsB,cAAcxB,GACvBqC,EAAgBnI,OAAO,IAExBoG,OAAOC,IACNC,QAAQC,IAAK,WAAUF,IAAM,IAE9B6B,SAAQ,KACPC,EAAgB5G,eAAc,EAAM,GACpC,IAUAuF,EAAwB,II5Lf,cAAoCpH,EACjDnD,YAAYoD,GACVc,MAAMd,GACN7C,KAAK+D,MAAQ/D,KAAK8C,OAAO5B,cAAc,QACzC,CAEA+I,aAAaqB,GACXtL,KAAKuL,eAAiBD,CACxB,CAEAhI,oBACEK,MAAML,oBACNtD,KAAK+D,MAAM3B,iBAAiB,UAAWgB,IACrCA,EAAImB,iBACJvE,KAAKuL,gBAAgB,GAEzB,GLJ2C,2BCiLvCC,EAAgB,IAAI/H,EDpLW,yBCmIP/D,IAC5B8L,EAAc/G,eAAc,GAE5B2C,EAAIwB,SAASlJ,GACVyI,MAAMzI,IACL0J,EAAe4B,QAAQnB,EAAWnK,IAClC8L,EAActI,OAAO,IAEtBoG,OAAOC,IACNC,QAAQC,IAAK,WAAUF,IAAM,IAE9B6B,SAAQ,KACPI,EAAc/G,eAAc,EAAM,GAClC,IAqCAmF,EAAiB,IK9LR,cAA6BhH,EAC1CnD,YAAYoD,GACVc,MAAMd,GACN7C,KAAKyL,OAASzL,KAAK8C,OAAO5B,cAAc,iBACxClB,KAAK0L,OAAS1L,KAAK8C,OAAO5B,cAAc,gBAC1C,CAEA+B,KAAKyG,EAAcC,GAEjB3J,KAAKyL,OAAOnJ,IAAMoH,EAClB1J,KAAKyL,OAAOlJ,IAAMoH,EAClB3J,KAAK0L,OAAOlK,YAAcmI,EAE1BhG,MAAMV,MACR,GNJoC,qBCqLhC0I,EAAuB,IAAIhH,EAAcC,EAAkBoC,GAC3D4E,EAAoB,IAAIjH,EAAcC,EAAkBuC,GACxD0E,EAAsB,IAAIlH,EAAcC,EAAkBsC,GAGhEyE,EAAqB/E,mBACrBgF,EAAkBhF,mBAClBiF,EAAoBjF,mBAIpBC,EAAWzE,iBAAiB,SArJE0J,KAC5B,MAAM,KAAE5L,EAAI,MAAEmI,GAAUa,EAASlB,cACjChB,EAAY9G,KAAKoE,MAAQpE,EACzB8G,EAAYqB,MAAM/D,MAAQ+D,EAC1BsD,EAAqBhF,kBACrBwE,EAAiBlI,MAAM,IAiJzB6D,EAAU1E,iBAAiB,SArEA2J,KACzBH,EAAkBjF,kBAClB6E,EAAcvI,MAAM,IAoEtB8D,EAAa3E,iBAAiB,SA7CC4J,KAC3BH,EAAoBlF,kBACpB0E,EAAgBpI,MAAM,IA4C1BkI,EAAiB7H,oBACjB+H,EAAgB/H,oBAChB0G,EAAsB1G,oBACtBkI,EAAclI,oBACdsG,EAAetG,mB","sources":["webpack://mesto/./src/components/Card.js","webpack://mesto/./src/components/Popup.js","webpack://mesto/./src/components/PopupWithForm.js","webpack://mesto/./src/components/FormValidator.js","webpack://mesto/./src/utils/constants.js","webpack://mesto/./src/pages/index.js","webpack://mesto/./src/components/Api.js","webpack://mesto/./src/components/UserInfo.js","webpack://mesto/./src/components/Section.js","webpack://mesto/./src/components/PopupWithСonfirmation.js","webpack://mesto/./src/components/PopupWithImage.js"],"sourcesContent":["export default class Card {\r\n  constructor(cardData, userId, templateSelector, handleCardClick, { handleLikeClick, handleDeleteClick }) {\r\n    this._name = cardData.name;\r\n    this._link = cardData.link;\r\n    this._likes = cardData.likes;\r\n    this._cardId = cardData._id;\r\n    this._ownerId = cardData.owner._id;\r\n    this._userId = userId;\r\n    this._templateSelector = templateSelector;\r\n    this._handleCardClick = handleCardClick;\r\n    this._handleLikeClick = handleLikeClick;\r\n    this._handleDeleteClick = handleDeleteClick;\r\n  }\r\n\r\n  _getCardElement() {\r\n    const cardElement = document\r\n      .querySelector(this._templateSelector)\r\n      .content\r\n      .querySelector(\".card\")\r\n      .cloneNode(true);\r\n\r\n    return cardElement;\r\n  }\r\n\r\n  // поставить лайк\r\n  putLike(likesArray) {\r\n    this._likeCounter.textContent = likesArray.length;\r\n    this._buttonLike.classList.add('card__like_active');\r\n    this._isLiked = true;\r\n  }\r\n\r\n  // удалить лайк\r\n  deleteLike(likesArray) {\r\n    this._likeCounter.textContent = likesArray.length;\r\n    this._buttonLike.classList.remove('card__like_active');\r\n    this._isLiked = false;\r\n  }\r\n\r\n  // удалить карточку\r\n  deleteCard() {\r\n    this._card.remove();\r\n    this._card = null;\r\n  }\r\n\r\n  // установить слушатели по клику на корзину, лайк, картинку\r\n  _setEventListeners() {\r\n    this._buttonDelete.addEventListener('click', () => {\r\n      this._handleDeleteClick(this._cardId);\r\n    });\r\n\r\n    this._buttonLike.addEventListener('click', () => {\r\n      this._handleLikeClick(this._cardId, this._isLiked);\r\n    });\r\n\r\n    this._cardImage.addEventListener('click', () => {\r\n      this._handleCardClick(this._cardImage.src, this._cardImage.alt);\r\n    });\r\n  }\r\n\r\n\r\n  // заполнить шаблон карточки данными, добавить слушатели\r\n  generateCard() {\r\n    this._card = this._getCardElement();\r\n\r\n    this._cardImage = this._card.querySelector('.card__image');\r\n    this._cardName = this._card.querySelector('.card__name');\r\n    this._buttonDelete = this._card.querySelector('.card__delete');\r\n    this._buttonLike = this._card.querySelector('.card__like');\r\n    this._likeCounter = this._card.querySelector('.card__like-counter');\r\n\r\n    this._likeCounter.textContent = this._likes.length;\r\n\r\n    if (this._likes.some((user) => user._id === this._ownerId)) {\r\n      this._isLiked = true;\r\n      this._buttonLike.classList.add('card__like_active');\r\n    } else {\r\n      this._isLiked = false;\r\n      this._buttonLike.classList.remove('card__like_active');\r\n    }\r\n\r\n    if (this._ownerId !== this._userId) {\r\n      this._buttonDelete.remove();\r\n    }\r\n\r\n    this._setEventListeners();\r\n\r\n    this._cardName.textContent = this._name;\r\n    this._cardImage.alt = this._name;\r\n    this._cardImage.src = this._link;\r\n\r\n    return this._card;\r\n  }\r\n}\r\n\r\n\r\n\r\n","export default class Popup {\r\n  constructor(popupSelector) {\r\n    this._popup = document.querySelector(popupSelector);\r\n    this._handleEscClose = this._handleEscClose.bind(this);\r\n  }\r\n\r\n  open() {\r\n    this._popup.classList.add('popup_opened');\r\n    document.addEventListener('keydown', this._handleEscClose);\r\n  }\r\n\r\n  close() {\r\n    this._popup.classList.remove('popup_opened');\r\n    document.removeEventListener('keydown', this._handleEscClose);\r\n  }\r\n\r\n  _handleEscClose(evt) {\r\n    if (evt.key === 'Escape') {\r\n      this.close();\r\n    }\r\n  }\r\n\r\n  setEventListeners() {\r\n    this._popup.addEventListener('mousedown', (evt) => {\r\n        if (evt.target.classList.contains('popup_opened') || evt.target.classList.contains('popup__close-button')) {\r\n          this.close();\r\n        }\r\n    });\r\n  }\r\n}","import Popup from './Popup.js';\r\n\r\nexport default class PopupWithForm extends Popup {\r\n  constructor(popupSelector, handleSubmitForm) {\r\n    super(popupSelector);\r\n    this._handleSubmitForm = handleSubmitForm;\r\n    this._inputList = this._popup.querySelectorAll('.form__input-text');\r\n    this._form = this._popup.querySelector('.form');\r\n    this._buttonSubmit = this._form.querySelector('.form__button');\r\n    this._initialButtonText = this._buttonSubmit.textContent;\r\n  }\r\n\r\n  _getInputValues() {\r\n    this._formValues = {};\r\n    this._inputList.forEach((input) => {\r\n      this._formValues[input.name] = input.value;\r\n    });\r\n    return this._formValues;\r\n  }\r\n\r\n  setEventListeners() {\r\n    super.setEventListeners();\r\n    this._form.addEventListener('submit', (evt) => {\r\n      evt.preventDefault();\r\n      this._handleSubmitForm(this._getInputValues());\r\n    });\r\n  }\r\n\r\n  close() {\r\n    super.close();\r\n    this._form.reset();\r\n  }\r\n  \r\n  renderLoading(isLoading) {\r\n    if (isLoading) {\r\n      this._buttonSubmit.textContent = 'Сохранение...';\r\n    } else {\r\n      this._buttonSubmit.textContent = this._initialButtonText;\r\n    }\r\n  }\r\n}","export default class FormValidator {\r\n  constructor(configValidation, formElement) {\r\n    this._inputSelector = configValidation.inputSelector;\r\n    this._submitButtonSelector = configValidation.submitButtonSelector;\r\n    this._inactiveButtonClass = configValidation.inactiveButtonClass;\r\n    this._inputErrorClass = configValidation.inputErrorClass;\r\n    this._errorClass = configValidation.errorClass;\r\n\r\n    this._formElement = formElement;\r\n\r\n    this._inputList = Array.from(this._formElement.querySelectorAll(this._inputSelector));\r\n    this._buttonElement = this._formElement.querySelector(this._submitButtonSelector);\r\n  }\r\n\r\n  // показать ошибку\r\n  _showInputError(inputElement) {\r\n    const errorElement = this._formElement.querySelector(\r\n      `.${inputElement.id}-error`\r\n    );\r\n    errorElement.textContent = inputElement.validationMessage;\r\n    errorElement.classList.add(this._errorClass);\r\n    inputElement.classList.add(this._inputErrorClass);\r\n  }\r\n\r\n  // скрыть ошибку\r\n  _hideInputError(inputElement) {\r\n    const errorElement = this._formElement.querySelector(\r\n      `.${inputElement.id}-error`\r\n   );\r\n    errorElement.textContent = \"\";\r\n    errorElement.classList.remove(this._errorClass);\r\n    inputElement.classList.remove(this._inputErrorClass);\r\n  }\r\n\r\n  // проверить на валидность конкретное поле ввода\r\n  _checkInputValidity(inputElement) {\r\n    if (!inputElement.validity.valid) {\r\n      this._showInputError(inputElement);\r\n    } else {\r\n      this._hideInputError(inputElement);\r\n    }\r\n  }\r\n\r\n  // найти среди всех полей ввода хотя бы одно невалидное поле\r\n  // для настройки статуса кнопки\r\n  _hasInvalidInput() {\r\n    return this._inputList.some((inputElement) => {\r\n      return !inputElement.validity.valid;\r\n    });\r\n  }\r\n\r\n  // заблокировать кнопку\r\n  _disableButton() {\r\n    this._buttonElement.classList.add(this._inactiveButtonClass);\r\n    this._buttonElement.setAttribute(\"disabled\", true);\r\n  }\r\n\r\n  // активировать кнопку\r\n  _enableButton() {\r\n    this._buttonElement.classList.remove(this._inactiveButtonClass);\r\n    this._buttonElement.removeAttribute(\"disabled\");\r\n  }\r\n\r\n  // изменить статус кнопки\r\n  _toggleButtonState() {\r\n    // если хотя бы одно поле ввода пустое или невалидно, сделать кнопку неактивной\r\n    if (this._hasInvalidInput()) {\r\n      this._disableButton();\r\n      // иначе - активной\r\n    } else {\r\n      this._enableButton();\r\n    }\r\n  }\r\n\r\n  // установить слушатели на все поля ввода и submit формы\r\n  // форму передаем через formElement\r\n  _setEventListeners() {\r\n    this._inputList.forEach((inputElement) => {\r\n      inputElement.addEventListener(\"input\", () => {\r\n        this._checkInputValidity(inputElement);\r\n        this._toggleButtonState();\r\n      });\r\n    });\r\n\r\n    this._formElement.addEventListener(\"submit\", (evt) => {\r\n      evt.preventDefault();\r\n    });\r\n  }\r\n\r\n  // сброс валидации\r\n  resetValidation() {\r\n    // кнопка неактивна\r\n    this._toggleButtonState();\r\n    // ошибки не показывать\r\n    this._inputList.forEach((inputElement) => {\r\n      this._hideInputError(inputElement);\r\n    });\r\n  }\r\n\r\n  // валидация формы\r\n  enableValidation() {\r\n    this._setEventListeners();\r\n  }\r\n}\r\n\r\n","\r\nexport const configValidation = {\r\n  inputSelector: \".form__input-text\",\r\n  submitButtonSelector: \".form__button\",\r\n  inactiveButtonClass: \"form__button_disabled\",\r\n  inputErrorClass: \"form__input-text_type_error-line\",\r\n  errorClass: \"form__input-error_active\",\r\n};\r\n\r\n// попапы\r\nexport const popupFormProfileSelector = \".popup_tupe_edit\";\r\nexport const popupFormCardSelector = \".popup_type_new-place\";\r\nexport const popupCardImageSelector = \".popup_type_image\";\r\nexport const popupFormAvatarSelector = \".popup_type_avatar\";\r\nexport const popupFormConfirmationSelector = '.popup_type_delete-card';\r\n\r\n// профиль\r\nexport const userNameSelector = '.profile__name';\r\nexport const userAboutSelector = '.profile__about';\r\nexport const userAvatarSelector = '.profile__avatar';\r\n\r\n// кнопки\r\nexport const buttonEdit = document.querySelector(\".profile__button_type_edit\");\r\nexport const buttonAdd = document.querySelector(\".profile__add-button\");\r\nexport const buttonAvatar = document.querySelector(\".profile__ava-button\");\r\n\r\n// формы\r\nexport const formProfile = document.forms[\"form-edit-profile\"];\r\nexport const formAvatar = document.forms[\"form-avatar\"];\r\nexport const formCard = document.forms[\"form-add-card\"];\r\n\r\n// template и контейнер для карточек\r\nexport const cardTemplateSelector = '#card-template';\r\nexport const cardsContainerSelector = '.cards-container'; ","import './index.css';\r\nimport Api from \"../components/Api\";\r\nimport Section from '../components/Section.js';\r\nimport Card from '../components/Card.js';\r\nimport PopupWithForm from '../components/PopupWithForm.js';\r\nimport PopupWithImage from '../components/PopupWithImage.js';\r\nimport PopupWithСonfirmation from '../components/PopupWithСonfirmation.js';\r\nimport UserInfo from '../components/UserInfo.js';\r\nimport FormValidator from '../components/FormValidator.js';\r\nimport {\r\n  configValidation,\r\n  buttonEdit,\r\n  buttonAvatar,\r\n  buttonAdd,\r\n  formProfile,\r\n  formAvatar,\r\n  formCard,\r\n  popupFormProfileSelector,\r\n  popupFormAvatarSelector,\r\n  popupFormCardSelector,\r\n  popupCardImageSelector,\r\n  popupFormConfirmationSelector,\r\n  userNameSelector,\r\n  userAboutSelector,\r\n  userAvatarSelector,\r\n  cardTemplateSelector,\r\n  cardsContainerSelector\r\n} from '../utils/constants.js';\r\n\r\nlet userId;\r\n\r\nconst api = new Api({\r\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-64',\r\n  headers: {\r\n    authorization: 'f399a358-b7ca-4b29-94a1-1f340ae5085a',\r\n    'Content-Type': 'application/json'\r\n  }\r\n}); \r\n\r\n// запрос на сервер:\r\n// получить данные о пользователе\r\n// получить карточки\r\nPromise.all([api.getUserInfo(), api.getCards()])\r\n  .then(([userData, cards]) => {\r\n    userId = userData._id;\r\n    userInfo.setUserInfo(userData);\r\n    cardsContainer.renderItems(cards);\r\n  })\r\n  .catch((err) => {\r\n    console.log(`Ошибка: ${err}`);\r\n  })\r\n\r\n  // Редактирование профиля\r\n\r\n// открыть форму Редактировать профиль\r\nconst handleOpenFormProfile = () => {\r\n  const { name, about } = userInfo.getUserInfo();\r\n  formProfile.name.value = name;\r\n  formProfile.about.value = about;\r\n  formProfileValidator.resetValidation();\r\n  popupFormProfile.open();\r\n};\r\n\r\n// submit + закрыть форму \"Редактировать профиль\"\r\nconst handleSubmitFormProfile = (userData) => {\r\n  popupFormProfile.renderLoading(true);\r\n  // запрос на сервер: обновить данные о пользователе\r\n  api.patchUserInfo(userData)\r\n    .then((userData) => {\r\n      userInfo.setUserInfo(userData);\r\n      popupFormProfile.close();\r\n    })\r\n    .catch((err) => {\r\n      console.log(`Ошибка: ${err}`);\r\n    })\r\n    .finally(() => {\r\n      popupFormProfile.renderLoading(false);\r\n    })\r\n};\r\n\r\n// Добавление карточек\r\n\r\n// обработчик клика по картинке карточки (открыть)\r\nconst handleCardClick = (cardImageSrc, cardImageAlt) => {\r\n  popupCardImage.open(cardImageSrc, cardImageAlt);\r\n};\r\n\r\n// создать карточку\r\nconst createCard = (cardData) => {\r\n  const card = new Card(\r\n    cardData,\r\n    userId,\r\n    cardTemplateSelector,\r\n    handleCardClick,\r\n    { handleLikeClick: (cardId, isLiked) => {\r\n        if (isLiked) {\r\n          // запрос на сервер: удалить лайк\r\n          api.deleteLike(cardId)\r\n            .then((cardData) => {\r\n              card.deleteLike(cardData.likes);\r\n            })\r\n            .catch((err) => {\r\n              console.log(`Ошибка: ${err}`);\r\n            })\r\n        } else {\r\n          // запрос на сервер: поставить лайк\r\n          api.putLike(cardId)\r\n            .then((cardData) => {\r\n              card.putLike(cardData.likes);\r\n            })\r\n            .catch((err) => {\r\n              console.log(`Ошибка: ${err}`);\r\n            })\r\n        }\r\n      },\r\n      handleDeleteClick: (cardId) => {\r\n        popupFormConfirmation.open();\r\n        popupFormConfirmation.handleSubmit(() => {\r\n          // запрос на сервер: удалить карточку\r\n          api.deleteCard(cardId)\r\n            .then((cardData) => {\r\n              card.deleteCard(cardData._id);\r\n              popupFormConfirmation.close();\r\n            })\r\n            .catch((err) => {\r\n              console.log(`Ошибка: ${err}`);\r\n            })\r\n        })\r\n      }\r\n    },\r\n  );\r\n  const createdCard = card.generateCard();\r\n  return createdCard;\r\n};\r\n\r\n// открыть форму \"Новое место\"\r\nconst handleOpenFormCard = () => {\r\n  formCardValidator.resetValidation();\r\n  popupFormCard.open();\r\n};\r\n\r\n// submit + закрыть форму \"Новое место\"\r\nconst handleSubmitFormCard = (cardData) => {\r\n  popupFormCard.renderLoading(true);\r\n  // запрос на сервер: добавить карточку\r\n  api.postCard(cardData)\r\n    .then((cardData) => {\r\n      cardsContainer.addItem(createCard(cardData));\r\n      popupFormCard.close();\r\n    })\r\n    .catch((err) => {\r\n      console.log(`Ошибка: ${err}`);\r\n    })\r\n    .finally(() => {\r\n      popupFormCard.renderLoading(false);\r\n    })\r\n};\r\n\r\n  // Обновление аватара\r\n\r\n  // открыть форму \"Обновить аватар\"\r\n  const handleOpenFormAvatar = () => {\r\n    formAvatarValidator.resetValidation();\r\n    popupFormAvatar.open();\r\n  };\r\n  \r\n  // submit + закрыть форму \"Обновить аватар\"\r\nconst handleSubmitFormAvatar = (userData) => {\r\n  popupFormAvatar.renderLoading(true);\r\n  // запрос на сервер: обновить аватар пользователя\r\n  api.patchAvatar(userData)\r\n    .then((userData) => {\r\n      userInfo.setUserAvatar(userData);\r\n      popupFormAvatar.close();\r\n    })\r\n    .catch((err) => {\r\n      console.log(`Ошибка: ${err}`);\r\n    })\r\n    .finally(() => {\r\n      popupFormAvatar.renderLoading(false);\r\n    })\r\n};\r\n\r\n\r\n// Экземпляры классов\r\n\r\nconst userInfo = new UserInfo(userNameSelector, userAboutSelector, userAvatarSelector);\r\nconst cardsContainer = new Section({ renderer: createCard }, cardsContainerSelector);\r\nconst popupFormProfile = new PopupWithForm(popupFormProfileSelector, handleSubmitFormProfile);\r\nconst popupFormAvatar = new PopupWithForm(popupFormAvatarSelector, handleSubmitFormAvatar);\r\nconst popupFormConfirmation = new PopupWithСonfirmation(popupFormConfirmationSelector);\r\nconst popupFormCard = new PopupWithForm(popupFormCardSelector, handleSubmitFormCard);\r\nconst popupCardImage = new PopupWithImage(popupCardImageSelector);\r\nconst formProfileValidator = new FormValidator(configValidation, formProfile);\r\nconst formCardValidator = new FormValidator(configValidation, formCard);\r\nconst formAvatarValidator = new FormValidator(configValidation, formAvatar); \r\n// ВАЛИДАЦИЯ ФОРМ\r\n\r\nformProfileValidator.enableValidation();\r\nformCardValidator.enableValidation();\r\nformAvatarValidator.enableValidation();\r\n\r\n// СЛУШАТЕЛИ СОБЫТИЙ\r\n\r\nbuttonEdit.addEventListener('click', handleOpenFormProfile);\r\nbuttonAdd.addEventListener('click', handleOpenFormCard);\r\nbuttonAvatar.addEventListener('click',  handleOpenFormAvatar);\r\npopupFormProfile.setEventListeners();\r\npopupFormAvatar.setEventListeners();\r\npopupFormConfirmation.setEventListeners();\r\npopupFormCard.setEventListeners();\r\npopupCardImage.setEventListeners();","export default class Api {\r\n  constructor({ baseUrl, headers }) {\r\n    this._baseUrl = baseUrl;\r\n    this._headers = headers;\r\n  }\r\n  \r\n  // проверить ответ сервера\r\n  _checkResponse(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка: ${res.status}`);\r\n  }\r\n\r\n  // получить данные о пользователе\r\n  getUserInfo() {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: 'GET',\r\n      headers: this._headers\r\n    })\r\n      .then(this._checkResponse)\r\n  }\r\n\r\n  // обновить данные о пользователе\r\n  patchUserInfo({ name, about }) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name,\r\n        about\r\n      })\r\n    })\r\n      .then(this._checkResponse)\r\n  }\r\n  \r\n  // обновить аватар пользователя\r\n  patchAvatar({ avatar }) {\r\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        avatar\r\n      })\r\n    })\r\n      .then(this._checkResponse)\r\n  }\r\n\r\n  // получить карточки\r\n  getCards() {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      method: 'GET',\r\n      headers: this._headers\r\n    })\r\n      .then(this._checkResponse)\r\n  }\r\n\r\n  // добавить карточку\r\n  postCard({ name, link }) {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      method: 'POST',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name,\r\n        link\r\n      })\r\n    })\r\n      .then(this._checkResponse)\r\n  }\r\n\r\n  // удалить карточку\r\n  deleteCard(cardId) {\r\n    return fetch(`${this._baseUrl}/cards/${cardId}`, {\r\n      method: 'DELETE',\r\n      headers: this._headers,\r\n    })\r\n      .then(this._checkResponse)\r\n  }\r\n\r\n  // поставить лайк\r\n  putLike(cardId) {\r\n    return fetch(`${this._baseUrl}/cards/${cardId}/likes`, {\r\n      method: 'PUT',\r\n      headers: this._headers,\r\n    })\r\n      .then(this._checkResponse)\r\n  }\r\n\r\n  // удалить лайк\r\n  deleteLike(cardId) {\r\n    return fetch(`${this._baseUrl}/cards/${cardId}/likes`, {\r\n      method: 'DELETE',\r\n      headers: this._headers,\r\n    })\r\n      .then(this._checkResponse)\r\n  }\r\n}","export default class UserInfo {\r\n  constructor(userNameSelector, userAboutSelector, userAvatarSelector) {\r\n    this._userName = document.querySelector(userNameSelector);\r\n    this._userAbout = document.querySelector(userAboutSelector);\r\n    this._userAvatar = document.querySelector(userAvatarSelector);\r\n  }\r\n\r\n  getUserInfo() {\r\n    const userInfo = {};\r\n    userInfo['name'] = this._userName.textContent;\r\n    userInfo['about'] = this._userAbout.textContent;\r\n    return userInfo;\r\n  }\r\n\r\n  setUserInfo({ name, about, avatar }) {\r\n    this._userName.textContent = name;\r\n    this._userAbout.textContent = about;\r\n    this._userAvatar.src = avatar;\r\n  }\r\n\r\n  setUserAvatar({ avatar }) {\r\n    this._userAvatar.src = avatar;\r\n  }\r\n}","export default class Section {\r\n  constructor({ renderer }, containerSelector) {\r\n    this._renderer = renderer;\r\n    this._container = document.querySelector(containerSelector);\r\n  }\r\n\r\n  renderItems(items) {\r\n    items.forEach((item) => {\r\n      this._container.append(this._renderer(item));\r\n    });\r\n  }\r\n\r\n  addItem(element) {\r\n    this._container.prepend(element);\r\n  }\r\n}\r\n\r\n\r\n\r\n","import Popup from './Popup.js';\r\n\r\nexport default class PopupWithСonfirmation extends Popup {\r\n  constructor(popupSelector) {\r\n    super(popupSelector);\r\n    this._form = this._popup.querySelector('.form');\r\n  }\r\n\r\n  handleSubmit(action) {\r\n    this._submitHandler = action;\r\n  }\r\n\r\n  setEventListeners() {\r\n    super.setEventListeners();\r\n    this._form.addEventListener('submit', (evt) => {\r\n      evt.preventDefault();\r\n      this._submitHandler();\r\n    });\r\n  }\r\n}","import Popup from './Popup.js';\r\n\r\nexport default class PopupWithImage extends Popup {\r\n  constructor(popupSelector) {\r\n    super(popupSelector);\r\n    this._image = this._popup.querySelector('.popup__image');\r\n    this._place = this._popup.querySelector('.popup__place');\r\n  }\r\n\r\n  open(cardImageSrc, cardImageAlt) {\r\n    \r\n    this._image.src = cardImageSrc;\r\n    this._image.alt = cardImageAlt;\r\n    this._place.textContent = cardImageAlt;\r\n\r\n    super.open();\r\n  }\r\n}"],"names":["Card","constructor","cardData","userId","templateSelector","handleCardClick","handleLikeClick","handleDeleteClick","this","_name","name","_link","link","_likes","likes","_cardId","_id","_ownerId","owner","_userId","_templateSelector","_handleCardClick","_handleLikeClick","_handleDeleteClick","_getCardElement","document","querySelector","content","cloneNode","putLike","likesArray","_likeCounter","textContent","length","_buttonLike","classList","add","_isLiked","deleteLike","remove","deleteCard","_card","_setEventListeners","_buttonDelete","addEventListener","_cardImage","src","alt","generateCard","_cardName","some","user","Popup","popupSelector","_popup","_handleEscClose","bind","open","close","removeEventListener","evt","key","setEventListeners","target","contains","PopupWithForm","handleSubmitForm","super","_handleSubmitForm","_inputList","querySelectorAll","_form","_buttonSubmit","_initialButtonText","_getInputValues","_formValues","forEach","input","value","preventDefault","reset","renderLoading","isLoading","FormValidator","configValidation","formElement","_inputSelector","inputSelector","_submitButtonSelector","submitButtonSelector","_inactiveButtonClass","inactiveButtonClass","_inputErrorClass","inputErrorClass","_errorClass","errorClass","_formElement","Array","from","_buttonElement","_showInputError","inputElement","errorElement","id","validationMessage","_hideInputError","_checkInputValidity","validity","valid","_hasInvalidInput","_disableButton","setAttribute","_enableButton","removeAttribute","_toggleButtonState","resetValidation","enableValidation","buttonEdit","buttonAdd","buttonAvatar","formProfile","forms","formAvatar","formCard","api","baseUrl","headers","_baseUrl","_headers","_checkResponse","res","ok","json","Promise","reject","status","getUserInfo","fetch","method","then","patchUserInfo","about","body","JSON","stringify","patchAvatar","avatar","getCards","postCard","cardId","authorization","all","userData","cards","userInfo","setUserInfo","cardsContainer","renderItems","catch","err","console","log","cardImageSrc","cardImageAlt","popupCardImage","createCard","card","isLiked","popupFormConfirmation","handleSubmit","userNameSelector","userAboutSelector","userAvatarSelector","_userName","_userAbout","_userAvatar","setUserAvatar","renderer","containerSelector","_renderer","_container","items","item","append","addItem","element","prepend","popupFormProfile","finally","popupFormAvatar","action","_submitHandler","popupFormCard","_image","_place","formProfileValidator","formCardValidator","formAvatarValidator","handleOpenFormProfile","handleOpenFormCard","handleOpenFormAvatar"],"sourceRoot":""}